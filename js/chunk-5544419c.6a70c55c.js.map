{"version":3,"sources":["webpack:///./src/views/backed/ChatOnline.vue?bd7b","webpack:///./src/views/backed/ChatOnline.vue","webpack:///./src/views/backed/ChatOnline.vue?4289"],"names":["class","src","title","moment","computed","newMessage","messages","newData","firstData","message","textA","textB","textC","textD","textE","textF","textG","user","select","time","format","isClose","stage","secondData","thirdData","methods","text","vm","this","data","Date","axios","post","body","then","res","isAddMessage","push","created_at","get","console","log","getMessage","__exports__","render"],"mappings":"gHAAA,W,qICCWA,MAAM,c,EACb,gCAAa,UAAT,QAAI,G,EAER,gCAyJM,OAzJDA,MAAM,kBAAgB,CACzB,gCAAiN,UAAzMC,IAAI,mLAAmLC,MAAM,O,MAHvM,EAEA,G,wDAHF,gCAiKU,UAjKV,EAiKU,G,sDAMZC,EAAA,UAAc,SAEC,OACbC,SAAU,IACL,eAAW,CACZ,OACA,cAGJ,OACE,MAAO,CAELC,WAAY,GACZC,SAAU,GACVC,QAAS,GAETC,UAAW,CACTC,QAAS,CACPC,MAAO,YACPC,MAAO,UACPC,MAAO,SACPC,MAAO,YACPC,MAAO,WACPC,MAAO,SACPC,MAAO,QAETC,KAAM,CACJC,OAAQ,IAEVC,KAAMhB,IAASiB,OAAO,uBACtBC,SAAS,EACTC,MAAO,GAITC,WAAY,CACVd,QAAS,CACPC,MAAO,OACPC,MAAO,cAETM,KAAM,CACJC,OAAQ,IAEVC,KAAM,GACNE,SAAS,EACTC,MAAO,GAITE,UAAW,CACTf,QAAS,CACPC,MAAO,OACPC,MAAO,UAETM,KAAM,CACJC,OAAQ,IAEVC,KAAM,GACNE,SAAS,EACTC,MAAO,KAIbG,QAAS,CAEP,YAAaC,GACX,MAAMC,EAAKC,KACLC,EAAOF,EAAGnB,WACK,IAAjBqB,EAAKR,UACPQ,EAAKZ,KAAKC,OAASQ,EACnBG,EAAKP,MAAQ,EACbO,EAAKR,SAAU,EACfM,EAAGJ,WAAWJ,KAAOhB,EAAO,IAAI2B,MAAQV,OAAO,yBAInD,aAAcM,GACZ,MAAMC,EAAKC,KACLC,EAAOF,EAAGJ,YACK,IAAjBM,EAAKR,UACPQ,EAAKZ,KAAKC,OAASQ,EACnBG,EAAKP,MAAQ,EACbO,EAAKR,SAAU,EACfM,EAAGH,UAAUL,KAAOhB,EAAO,IAAI2B,MAAQV,OAAO,yBAIlD,YAAaM,GACX,MAAMC,EAAKC,KACLC,EAAOF,EAAGH,WACK,IAAjBK,EAAKR,UACPQ,EAAKZ,KAAKC,OAASQ,EACnBG,EAAKP,MAAQ,EACbO,EAAKR,SAAU,IAGnB,aACE,MAAMM,EAAKC,KACX,GAAsB,KAAlBD,EAAGtB,WACL,OAAO,EAETsB,EAAGI,MAAMC,KAAK,gDAAiD,CAAEC,KAAMN,EAAGtB,aACvE6B,KAAMC,IACLR,EAAGS,cAAe,EAClBT,EAAGpB,QAAQ8B,KAAK,CAAEJ,KAAMN,EAAGtB,WAAYiC,WAAYnC,EAAO,IAAI2B,MAAQV,OAAO,yBAC7EO,EAAGtB,WAAa,MAGtB,aACE,MAAMsB,EAAKC,KACXD,EAAGI,MAAMQ,IAAI,oEACVL,KAAMC,IACLK,QAAQC,IAAIN,GACZR,EAAGrB,SAAW6B,EAAIN,KAAKA,SAI/B,UACED,KAAKc,e,iCCvRT,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E","file":"js/chunk-5544419c.6a70c55c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChatOnline.vue?vue&type=style&index=0&id=09485b5a&scoped=true&lang=scss\"","<template>\r\n  <section class=\"chatOnline\">\r\n    <h2>線上聊聊</h2>\r\n    <!-- 對話框 -->\r\n    <div class=\"chatOnline-box\">\r\n      <iframe src=\"https://webchat.botframework.com/embed/cmuhtgoh-chatbot-bot20221108/gemini?b=cmuhtgoh-chatbot-bot20221108&s=Qfqlik4yVn0.hAUQEnhRilTXhW2nZK3-MUfhMshssDXZpRBkNOqc_R4&username=You\" title=\"\"></iframe>\r\n\r\n      <!-- 自動回覆第一層 -->\r\n      <!-- <div class=\"admin\">\r\n        <img src=\"../../assets/image/backed/member_image_administrator.svg\">\r\n        <div>\r\n          <div class=\"admin-box\">\r\n            <h3>哈囉！歡迎使用線上聊聊系統：）<br>\r\n                請問有什麽可以幫助你的嗎？\r\n            </h3>\r\n            <ul v-for=\"item in firstData.message\" :key=\"item\">\r\n              <li>\r\n                <p @click=\"firstSelect(item)\">{{ item }}</p>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"time-item\">\r\n            <i class=\"far fa-clock\"></i>\r\n            <small>{{ firstData.time }}</small>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n      <!-- 使用者第一層 -->\r\n      <!-- <div class=\"user\" v-if=\"firstData.stage === 1 || firstData.isClose === true\">\r\n        <img src=\"../../assets/image/backed/member_image_user.svg\">\r\n        <div class=\"user-box\">\r\n          <h3>\r\n            {{ firstData.user.select }}\r\n          </h3>\r\n        </div>\r\n      </div> -->\r\n\r\n      <!-- 自動回覆第二層 -->\r\n      <!-- <div class=\"admin\" v-if=\"firstData.user.select === '我想要生下來'\">\r\n        <img src=\"../../assets/image/backed/member_image_administrator.svg\">\r\n        <div>\r\n          <div class=\"admin-box\">\r\n            <h3>您選擇了「{{firstData.user.select}}」</h3>\r\n            <ul v-for=\"item in secondData.message\" :key=\"item\">\r\n              <li>\r\n                <p @click=\"secondSelect(item)\">{{ item }}</p>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"time-item\">\r\n            <i class=\"far fa-clock\"></i>\r\n            <small>{{ secondData.time }}</small>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n\r\n      <!-- 使用者第二層 -->\r\n      <!-- <div class=\"user\" v-if=\"secondData.stage === 2 || secondData.isClose === true\">\r\n        <img src=\"../../assets/image/backed/member_image_user.svg\">\r\n        <div class=\"user-box\">\r\n          <h3>\r\n            {{ secondData.user.select }}\r\n          </h3>\r\n        </div>\r\n      </div> -->\r\n\r\n      <!-- 自動回覆第三層 -->\r\n      <!-- <div class=\"admin\" v-if=\"secondData.user.select === '自行撫養'\">\r\n        <img src=\"../../assets/image/backed/member_image_administrator.svg\">\r\n        <div>\r\n          <div class=\"admin-box\">\r\n            <h3>您選擇了「{{secondData.user.select}}」</h3>\r\n            <ul v-for=\"item in thirdData.message\" :key=\"item\">\r\n              <li>\r\n                <p @click=\"thirdSelect(item)\">{{ item }}</p>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"time-item\">\r\n            <i class=\"far fa-clock\"></i>\r\n            <small>{{ thirdData.time }}</small>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n\r\n      <!-- 留言板 -->\r\n      <!-- <div>\r\n        <h3 class=\"text-center dedicated-person\">--- 正在轉接專人服務 ---</h3>\r\n        <div class=\"admin\">\r\n          <img src=\"../../assets/image/backed/member_image_administrator.svg\">\r\n          <div>\r\n            <div class=\"chat-box\">\r\n              <p>哈囉 請問 {{ userData.name }} 有什麼問題呢？:D </p>\r\n            </div>\r\n            <div class=\"time-item\">\r\n                <i class=\"far fa-clock\"></i>\r\n                <small>{{ firstData.time }}</small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-for=\"(item, index) in messages\" :key=\"index\">\r\n          <div class=\"user pb-30\" v-if=\"item.user_id !== 55\">\r\n            <img src=\"../../assets/image/backed/member_image_user.svg\">\r\n              <ul class=\"d-flex align-items-end flex-column\">\r\n                <li>\r\n                  <div class=\"user-box\">\r\n                    <p>\r\n                      {{ item.body }}\r\n                      {{ item.length}}\r\n                    </p>\r\n                  </div>\r\n                </li>\r\n                <div class=\"time-item\">\r\n                  <i class=\"far fa-clock\"></i>\r\n                  <small>{{ item.created_at }}</small>\r\n                </div>\r\n            </ul>\r\n          </div>\r\n          <div class=\"admin-chat\" v-if=\"item.user_id == 55\">\r\n            <img src=\"../../assets/image/backed/member_image_administrator.svg\">\r\n            <ul class=\"d-flex align-items-end flex-column\">\r\n              <li>\r\n                <div class=\"admin-chat-box\">\r\n                  <p>\r\n                    {{ item.body }}\r\n                    {{ item.length}}\r\n                  </p>\r\n                </div>\r\n                <div class=\"time-item\">\r\n                    <i class=\"far fa-clock\"></i>\r\n                    <small>{{ item.created_at }}</small>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div v-for=\"(item, index) in newData\" :key=\"index\">\r\n          <div class=\"user pb-30\">\r\n            <img src=\"../../assets/image/backed/member_image_user.svg\">\r\n              <ul class=\"d-flex align-items-end flex-column\">\r\n                <li>\r\n                  <div class=\"user-box\">\r\n                    <p>\r\n                      {{ item.body }}\r\n                      {{ item.length}}\r\n                    </p>\r\n                  </div>\r\n                </li>\r\n                <div class=\"time-item\">\r\n                  <i class=\"far fa-clock\"></i>\r\n                  <small>{{ item.created_at }}</small>\r\n                </div>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n    </div>\r\n    <!-- <div class=\"send-input\">\r\n      <input type=\"text\" placeholder=\"輸入問題\" v-model=\"newMessage\">\r\n      <button class=\"btn btn-black\" type=\"button\" @click=\"addMessage\">送出</button>\r\n    </div> -->\r\n  </section>\r\n</template>\r\n<script>\r\n// 載入 moment.js + 設置語系\r\nimport * as moment from 'moment/moment'\r\nimport { mapGetters } from 'vuex'\r\nmoment.locale('zh-tw')\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapGetters([\r\n      'user',\r\n      'userData'\r\n    ])\r\n  },\r\n  data () {\r\n    return {\r\n      // 儲存訊息資料用\r\n      newMessage: '',\r\n      messages: [],\r\n      newData: [],\r\n      // *** 第一階段資料 ***\r\n      firstData: {\r\n        message: {\r\n          textA: '我需要有人一起討論',\r\n          textB: '我不想要生下來',\r\n          textC: '我想要生下來',\r\n          textD: '如何安排與男方關係',\r\n          textE: '如何得到社會協助',\r\n          textF: '我未滿16歲',\r\n          textG: '疑似懷孕'\r\n        },\r\n        user: {\r\n          select: ''\r\n        },\r\n        time: moment().format('YYYY/MM/DD HH:mm:ss'),\r\n        isClose: false,\r\n        stage: 0\r\n      },\r\n\r\n      // *** 第二階資料 ***\r\n      secondData: {\r\n        message: {\r\n          textA: '自行撫養',\r\n          textB: '其他因素無法自行撫養'\r\n        },\r\n        user: {\r\n          select: ''\r\n        },\r\n        time: '',\r\n        isClose: false,\r\n        stage: 0\r\n      },\r\n\r\n      // *** 第三階資料 ***\r\n      thirdData: {\r\n        message: {\r\n          textA: '結束諮詢',\r\n          textB: '轉接專人服務'\r\n        },\r\n        user: {\r\n          select: ''\r\n        },\r\n        time: '',\r\n        isClose: false,\r\n        stage: 0\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // Q&A 自動回覆第一階\r\n    firstSelect (text) {\r\n      const vm = this\r\n      const data = vm.firstData\r\n      if (data.isClose === false) {\r\n        data.user.select = text\r\n        data.stage = 1\r\n        data.isClose = true\r\n        vm.secondData.time = moment(new Date()).format('YYYY/MM/DD HH:mm:ss')\r\n      }\r\n    },\r\n    // 自動回覆第二階\r\n    secondSelect (text) {\r\n      const vm = this\r\n      const data = vm.secondData\r\n      if (data.isClose === false) {\r\n        data.user.select = text\r\n        data.stage = 1\r\n        data.isClose = true\r\n        vm.thirdData.time = moment(new Date()).format('YYYY/MM/DD HH:mm:ss')\r\n      }\r\n    },\r\n    // 自動回覆第三階\r\n    thirdSelect (text) {\r\n      const vm = this\r\n      const data = vm.thirdData\r\n      if (data.isClose === false) {\r\n        data.user.select = text\r\n        data.stage = 1\r\n        data.isClose = true\r\n      }\r\n    },\r\n    addMessage () {\r\n      const vm = this\r\n      if (vm.newMessage === '') {\r\n        return false\r\n      }\r\n      vm.axios.post('https://iecosystem-api.tomyue.cc/api/messages', { body: vm.newMessage })\r\n        .then((res) => {\r\n          vm.isAddMessage = true\r\n          vm.newData.push({ body: vm.newMessage, created_at: moment(new Date()).format('YYYY/MM/DD HH:mm:ss') })\r\n          vm.newMessage = ''\r\n        })\r\n    },\r\n    getMessage () {\r\n      const vm = this\r\n      vm.axios.get('https://iecosystem-api.tomyue.cc/api/messages?page=1&perPage=100')\r\n        .then((res) => {\r\n          console.log(res)\r\n          vm.messages = res.data.data\r\n        })\r\n    }\r\n  },\r\n  created () {\r\n    this.getMessage()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.chatOnline-box {\r\n  padding: 15px;\r\n}\r\niframe {\r\n  height: 100vh;\r\n}\r\n</style>\r\n","import { render } from \"./ChatOnline.vue?vue&type=template&id=09485b5a&scoped=true\"\nimport script from \"./ChatOnline.vue?vue&type=script&lang=js\"\nexport * from \"./ChatOnline.vue?vue&type=script&lang=js\"\n\nimport \"./ChatOnline.vue?vue&type=style&index=0&id=09485b5a&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\foundation\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-09485b5a\"]])\n\nexport default __exports__"],"sourceRoot":""}